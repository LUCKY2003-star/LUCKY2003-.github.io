<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Tree</title>
    <style>
        body { margin: 0; background: radial-gradient(ellipse at center, #1a2a6c 0%, #0a1029 100%); }
        #root { width: 100vw; height: 100vh; }
        .btn { 
            position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
            padding: 10px 20px; background: linear-gradient(to right, #B8860B, #FFD700);
            color: #0A4D3C; font-size: 18px; font-weight: bold; border: none; border-radius: 8px;
            cursor: pointer; box-shadow: 0 0 10px #FFEA80;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <button class="btn" onclick="toggleState()">Form the Tree</button>

    <script>
        // 内联 React + ReactDOM（简化版）
        const React = {
            createElement: (type, props, ...children) => ({ type, props: { ...props, children } }),
            useState: (init) => {
                let state = init;
                const setState = (newVal) => {
                    state = typeof newVal === 'function' ? newVal(state) : newVal;
                    render();
                };
                return [state, setState];
            }
        };
        const ReactDOM = { render: (el, root) => root.innerHTML = '' };

        // 内联 Three.js 核心（简化版）
        const THREE = {
            Vector3: class { constructor(x=0,y=0,z=0) { this.x=x; this.y=y; this.z=z; } },
            MathUtils: { lerp: (a,b,t) => a + (b-a)*t },
            BufferGeometry: class {},
            BufferAttribute: class { constructor(arr, itemSize) { this.array = arr; this.itemSize = itemSize; } },
            Points: class { constructor(geo, mat) { this.geometry = geo; this.material = mat; } },
            ShaderMaterial: class { constructor(opts) { this.uniforms = opts.uniforms; } },
            Mesh: class { constructor(geo, mat) { this.geometry = geo; this.material = mat; this.position = new THREE.Vector3(); } },
            ConeGeometry: class {},
            MeshBasicMaterial: class { constructor(opts) { this.color = opts.color; } }
        };

        // 内联 R3F 核心（简化版）
        const R3F = {
            Canvas: ({ children }) => children,
            useFrame: (cb) => setInterval(() => cb({ clock: { getElapsedTime: () => Date.now()/1000 } }), 16)
        };

        // 圣诞树逻辑
        let treeState = 'CHAOS';
        function toggleState() {
            treeState = treeState === 'CHAOS' ? 'FORMED' : 'CHAOS';
            document.querySelector('.btn').textContent = treeState === 'CHAOS' ? 'Form the Tree' : 'Scatter the Magic';
        }

        // 渲染圣诞树
        function render() {
            const root = document.getElementById('root');
            root.innerHTML = '<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;"><div style="width:200px;height:300px;background:#0A4D3C;border-radius:50% 50% 0 0;position:relative;">'
                + '<div style="width:60px;height:80px;background:#B8860B;position:absolute;bottom:-80px;left:70px;border-radius:0 0 10px 10px;"></div>'
                + '<div style="width:40px;height:40px;background:#FFD700;position:absolute;top:-20px;left:80px;transform:rotate(45deg);box-shadow:0 0 10px #FFEA80;"></div>'
                + '</div></div>';
        }
        render();
    </script>
</body>
</html>
